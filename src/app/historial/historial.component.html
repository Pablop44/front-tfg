<div class="grid-container">
    <mat-grid-list cols="2" rowHeight="400px">
      <mat-grid-tile *ngFor="let card of cards | async" [colspan]="card.cols" [rowspan]="card.rows"> 
  
            <mat-card class="dashboard-card">
              <mat-card-header>
                <mat-card-title>
                  Historiales Clínicos
                </mat-card-title>
              </mat-card-header>
  
              <mat-card-content>

                <mat-card class="cartaFiltro">
                    <mat-card-header>
                      <mat-card-subtitle>
                        Filtrar Medicamentos
                      </mat-card-subtitle>
                    </mat-card-header>
  
                    <mat-card-content>
  
                      <form class="formFiltrar" (ngSubmit)="aplicarFiltro()" #loginForm="ngForm">
                          <mat-form-field style="width: 40%;">
                            <mat-label>Nombre del Medicamento</mat-label>
                            <input matInput type="text" id="id" name="id"  placeholder="Nombre">
                          </mat-form-field>
  
  
                          <mat-form-field style="width: 20%; margin-left: 100px; margin-right: 20px;">
                            <mat-label>Mínima Dosis</mat-label>
                            <input matInput id="minDosis" name="minDosis"  placeholder="Número">
                          </mat-form-field>
                          <mat-form-field style="width: 20%;">
                            <mat-label>Máxima Dosis</mat-label>
                            <input matInput id="maxDosis" name="maxDosis"  placeholder="Número">
                          </mat-form-field>
                        
          
                          <mat-form-field style="width: 50%; margin-right: 100px;">
                            <mat-label>Vía de Administración</mat-label>
                            <input matInput type="text" id="id" name="id" placeholder="Vía">
                          </mat-form-field>
  
                          <mat-form-field style="width: 30%; margin-right: 20px;">
                            <mat-label>Marca del Medicamento</mat-label>
                            <mat-select >
                              <mat-option *ngFor="let marca of marcas" (click)="establecerMarcaFiltro(marca.nombre)" [value]="marca.nombre">
                                {{marca.nombre}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                                                                     
                        <button mat-raised-button type="submit" color="primary">Filtrar</button>
                      </form>
  
                    </mat-card-content>
  
                  </mat-card>

                <div>
                    
                    <table  mat-table matSort [dataSource]="dataSource" >
                  
                      <!-- Progress Column -->
                      <ng-container matColumnDef="numero">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header (click)="ordenar('nombre')"> Número de Historial </th>
                        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
                      </ng-container>

                      <ng-container matColumnDef="fecha">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header (click)="ordenar('viaAdministracion')"> Fecha de Creación </th>
                        <td mat-cell *matCellDef="let row"> {{row.fechaCreacion}} </td>
                      </ng-container>

                      <ng-container matColumnDef="enfermedad">
                        <th mat-header-cell *matHeaderCellDef> Enfermedad</th>
                        <td mat-cell *matCellDef="let row"> {{row.enfermedad}}</td>
                      </ng-container>
                  
                      <!-- Name Column -->
                      <ng-container matColumnDef="dniPaciente">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header (click)="ordenar('marca')"> DNI del Paciente</th>
                        <td mat-cell *matCellDef="let row"> {{row.pacienteDni}}</td>
                      </ng-container>

                      <ng-container matColumnDef="nombrePaciente">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header (click)="ordenar('dosis')"> Nombre del Paciente </th>
                        <td mat-cell *matCellDef="let row"> {{row.nombrePaciente}}</td>
                      </ng-container>

                      <ng-container matColumnDef="dniMedico">
                        <th mat-header-cell *matHeaderCellDef> DNI del Médico</th>
                        <td mat-cell *matCellDef="let row"> {{row.dniMedico}}</td>
                      </ng-container>

                      <ng-container matColumnDef="nombreMedico">
                        <th mat-header-cell *matHeaderCellDef> Nombre del Médico</th>
                        <td mat-cell *matCellDef="let row"> {{row.nombreMedico}}</td>
                      </ng-container>
                  
                      <ng-container matColumnDef="colegiado">
                        <th mat-header-cell *matHeaderCellDef> Número de Colegiado</th>
                        <td mat-cell *matCellDef="let row"> {{row.colegiado}}</td>
                      </ng-container>

                      <ng-container matColumnDef="acciones">
                        <th mat-header-cell *matHeaderCellDef> Acciones</th>
                        <td mat-cell *matCellDef="let row"> 
                          <a [routerLink]="['/ficha-individual', row.id]" mat-stroked-button color="primary" ><i class="material-icons"> remove_red_eye </i></a>
                          <button mat-stroked-button color="primary" (click)="openDialog4(row)"><i class="material-icons"> remove_circle </i></button>
                        </td>
                      </ng-container>

                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;">
                      </tr>
                    </table>
                  
                    <mat-paginator #paginator3 [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 15]" [showFirstLastButtons]="true" [length]="totalSize"
                        [pageIndex]="currentPage" (page)="pageEvent = handlePage($event)">
                    </mat-paginator>
                  </div>
                   
              </mat-card-content>
            </mat-card>
        
      </mat-grid-tile>
    </mat-grid-list>
  </div>
  
